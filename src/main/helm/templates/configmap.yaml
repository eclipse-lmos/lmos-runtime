apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "lmos-runtime.fullname" . }}-config
data:
  OPENAI_API_URL: {{ .Values.openaiApiUrl | quote }}
  OPENAI_API_MODEL: {{ .Values.openaiApiModel | quote }}
  OPENAI_API_TEMP: {{ .Values.openaiApiTemperature | quote }}
  OPENAI_API_FORMAT: {{ .Values.openaiApiFormat | quote }}
  OPENAI_API_MAX_TOKENS: {{ .Values.openaiApiMaxTokens | quote }}
  AGENT_REGISTRY_URL: {{ .Values.agentRegistryUrl | quote }}

  {{- if .Values.corsEnabled }}
  CORS_ENABLED: {{ .Values.corsEnabled | quote }}
  {{- end }}

  {{- if .Values.corsAllowedOrigins }}
  CORS_ALLOWED_ORIGINS: {{ .Values.corsAllowedOrigins | toYaml | quote }}
  {{- end }}

  {{- if .Values.corsAllowedMethods }}
  CORS_ALLOWED_METHODS: {{ .Values.corsAllowedMethods | toYaml | quote }}
  {{- end }}

  {{- if .Values.corsAllowedHeaders }}
  CORS_ALLOWED_HEADERS: {{ .Values.corsAllowedHeaders | toYaml | quote }}
  {{- end }}

  {{- if .Values.corsPatterns }}
  CORS_PATTERNS: {{ .Values.corsPatterns | toYaml | quote }}
  {{- end }}

  {{- if .Values.corsMaxAge }}
  CORS_MAX_AGE: {{ .Values.corsMaxAge | quote }}
  {{- end }}
